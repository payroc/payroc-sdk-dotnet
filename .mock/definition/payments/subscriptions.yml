types:
  ListSubscriptionsRequestFrequency:
    enum:
      - weekly
      - fortnightly
      - monthly
      - quarterly
      - yearly
    source:
      openapi: read-only/openapi/external/universal-api-v1.yaml
  ListSubscriptionsRequestStatus:
    enum:
      - active
      - completed
      - suspended
      - cancelled
    source:
      openapi: read-only/openapi/external/universal-api-v1.yaml
  SubscriptionRequestPaymentMethod:
    discriminant: type
    base-properties: {}
    docs: Object that contains information about the customer's payment details.
    union:
      secureToken:
        type: root.SecureTokenPayload
    source:
      openapi: read-only/openapi/external/universal-api-v1.yaml
imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    list:
      path: /processing-terminals/{processingTerminalId}/subscriptions
      method: GET
      auth: true
      docs: "Use this method to return a [paginated](/api/pagination) list of subscriptions.  \n\nNote: If you want to view a specific subscription and you have its subscriptionId, use our [Retrieve subscription](/api/schema/payments/subscriptions/get) method.  \n\nUse query parameters to filter the list of results that we return, for example, to search for subscriptions for a customer, a payment plan, or frequency.  \n\nOur gateway returns information about the following for each subscription in the list:  \n\n-\tPayment plan the subscription is linked to.  \n-\tSecure token that represents cardholder’s payment details.  \n-\tCurrent state of the subscription, including its status, next due date, and invoices.  \n-\tFees for setup and the cost of the recurring order.  \n-\tSubscription length, end date, and frequency.  \n\nFor each subscription, we also return the subscriptionId, the paymentPlanId, and the secureTokenId, which you can use to perform follow-actions. \n"
      pagination:
        type: custom
        results: $response.data
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: List subscriptions
      request:
        name: ListSubscriptionsRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
        query-parameters:
          customerName:
            type: optional<string>
            docs: Filter by the customer's name.
            validation:
              minLength: 1
              maxLength: 50
          last4:
            type: optional<string>
            docs: Filter by the last four digits of the card or account number.
            validation:
              pattern: '[0-9]{4}'
          paymentPlan:
            type: optional<string>
            docs: Filter by the name of the payment plan.
            validation:
              minLength: 1
              maxLength: 128
          frequency:
            type: optional<ListSubscriptionsRequestFrequency>
            docs: Filter by the frequency of subscription payments.
          status:
            type: optional<ListSubscriptionsRequestStatus>
            docs: Filter by the current status of the subscription.
          endDate:
            type: optional<date>
            docs: |
              Format: `YYYY-MM-DD`  
              Filter subscriptions that end on a specific date.
          nextDueDate:
            type: optional<date>
            docs: >
              Format: `YYYY-MM-DD`  

              Filter subscriptions by the date that the next payment is
              collected.
          before:
            type: optional<string>
            docs: >-
              Points to the resource identifier that you want to receive your
              results before. Typically, this is the first resource on the
              previous page.
          after:
            type: optional<string>
            docs: >-
              Points to the resource identifier that you want to receive your
              results after. Typically, this is the last resource on the
              previous page.
          limit:
            type: optional<integer>
            default: 10
            docs: States the total amount of results the response is limited to.
            validation:
              max: 100
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
      response:
        docs: Successful request. Returns a paginated list of subscriptions.
        type: root.SubscriptionPaginatedList
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Paginated Subscription
          path-parameters:
            processingTerminalId: '1234001'
          query-parameters:
            customerName: Sarah%20Hazel%20Hopper
            last4: '7062'
            paymentPlan: Premium%20Club
            endDate: '2025-07-01'
            nextDueDate: '2024-08-01'
            before: '2571'
            after: '8516'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          response:
            body:
              limit: 2
              count: 2
              hasMore: true
              links:
                - rel: next
                  method: get
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/subscriptions?limit=2&after=SubRef8543
                - rel: previous
                  method: get
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/subscriptions?limit=2&before=SubRef7654
              data:
                - subscriptionId: SubRef7654
                  processingTerminalId: '1234001'
                  paymentPlan:
                    paymentPlanId: PlanRef8765
                    name: Monthly Premium Club subscription
                    link:
                      rel: self
                      method: GET
                      href: >-
                        https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
                  secureToken:
                    secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                    customerName: Sarah Hazel Hopper
                    token: '296753123456'
                    status: notValidated
                    link:
                      rel: self
                      method: GET
                      href: >-
                        https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                  name: Premium Club
                  description: Monthly Premium Club subscription
                  currency: USD
                  setupOrder:
                    orderId: OrderRef6543
                    amount: 4999
                    description: Initial setup fee for Premium Club subscription
                    breakdown:
                      subtotal: 4500
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  recurringOrder:
                    amount: 4999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4500
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  currentState:
                    status: active
                    nextDueDate: '2024-08-02'
                    paidInvoices: 1
                    outstandingInvoices: 11
                  startDate: '2024-07-02'
                  endDate: '2025-08-01'
                  length: 0
                  type: automatic
                  frequency: monthly
                  pauseCollectionFor: 0
                  customFields:
                    - name: yourCustomField
                      value: abc123
                - subscriptionId: SubRef8543
                  processingTerminalId: '1234001'
                  paymentPlan:
                    paymentPlanId: PlanRef7654
                    name: Pie it Forward charitable trust donation
                    link:
                      rel: self
                      method: GET
                      href: >-
                        https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef7654
                  secureToken:
                    secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                    customerName: Sarah Hazel Hopper
                    token: '296753123456'
                    status: notValidated
                    link:
                      rel: self
                      method: GET
                      href: >-
                        https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                  name: Pie It Forward
                  description: Pie It Forward charitable trust donation
                  currency: USD
                  setupOrder:
                    orderId: OrderRef7654
                    amount: 3999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4500
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  recurringOrder:
                    amount: 3999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4500
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  currentState:
                    status: active
                    nextDueDate: '2024-04-11'
                    paidInvoices: 1
                    outstandingInvoices: 11
                  startDate: '2024-07-02'
                  endDate: '2024-07-02'
                  length: 0
                  type: automatic
                  frequency: yearly
                  pauseCollectionFor: 0
                  customFields:
                    - name: yourCustomField
                      value: abc123
        - name: No records found
          path-parameters:
            processingTerminalId: '1234001'
          query-parameters:
            customerName: Sarah%20Hazel%20Hopper
            last4: '7062'
            paymentPlan: Premium%20Club
            endDate: '2025-07-01'
            nextDueDate: '2024-08-01'
            before: '2571'
            after: '8516'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          response:
            body:
              limit: 10
              count: 0
              hasMore: false
              links:
                - rel: previous
                  method: get
                  href: <uri>
                - rel: next
                  method: get
                  href: <uri>
              data:
                - subscriptionId: SubRef7654
                  processingTerminalId: '1234001'
                  paymentPlan:
                    paymentPlanId: PlanRef8765
                    name: Monthly Premium Club subscription
                    link:
                      rel: previous
                      method: get
                      href: <uri>
                  secureToken:
                    secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                    customerName: Sarah Hazel Hopper
                    token: '296753123456'
                    status: notValidated
                    link:
                      rel: previous
                      method: get
                      href: <uri>
                  name: Premium Club
                  description: >-
                    Monthly Premium Club subscription. Two large pizzas free per
                    month, and exclusive member discounts.
                  currency: AED
                  setupOrder:
                    orderId: OrderRef6543
                    amount: 4999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4500
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  recurringOrder:
                    amount: 4999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4500
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  currentState:
                    status: active
                    nextDueDate: '2024-08-02'
                    paidInvoices: 3
                    outstandingInvoices: 9
                  startDate: '2024-05-02'
                  endDate: '2025-05-02'
                  length: 12
                  type: manual
                  frequency: weekly
                  pauseCollectionFor: 0
                  customFields:
                    - name: yourCustomField
                      value: abc123
    create:
      path: /processing-terminals/{processingTerminalId}/subscriptions
      method: POST
      auth: true
      docs: >
        Use this method to assign a customer to a payment plan.  


        **Note:** This method is part of our Repeat Payments feature. To help
        you understand how this method works with our Payment plans endpoints,
        go to [Repeat Payments](/guides/integrate/repeat-payments).  


        When you create a subscription you need to provide a unique
        subscriptionId that you use to run follow-on actions:  


        - [Retrieve Subscription](/api/schema/payments/subscriptions/get) - View
        the details of the subscription.

        - [Update Subscription](/api/schema/payments/subscriptions/patch) -
        Update the details of the subscription.

        - [Deactivate
        Subscription](/api/schema/payments/subscriptions/deactivate) - Stop
        taking payments for the subscription.

        - [Re-activate
        Subscription](/api/schema/payments/subscriptions/reactivate) - Start
        taking payments again for the subscription.

        - [Pay Manual Subscription](/api/schema/payments/subscriptions/pay) -
        Manually collect a payment for the subscription.


        The request includes the following settings:

        - **paymentPlanId** - Unique identifier of the payment plan that the
        merchant wants to use.

        - **paymentMethod** - Object that contains information about the secure
        token, which represents the customer's card details or bank account
        details.

        - **startDate** - Date that you want to start to take payments.


        You can also update the settings that the subscription inherited from
        the payment plan, for example, you can change the amount for each
        payment. If you change the settings for the subscription, it doesn't
        change the settings in the payment plan that it's linked to. 
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Create subscription
      request:
        name: SubscriptionRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        body:
          properties:
            subscriptionId:
              type: string
              docs: >-
                Unique identifier that the merchant assigned to the
                subscription.
              validation:
                minLength: 1
                maxLength: 48
            paymentPlanId:
              type: string
              docs: >-
                Unique identifier that the merchant assigned to the payment
                plan.
              validation:
                minLength: 1
                maxLength: 48
            paymentMethod:
              type: SubscriptionRequestPaymentMethod
              docs: >-
                Object that contains information about the customer's payment
                details.
            name:
              type: optional<string>
              docs: |
                Name of the subscription. 
                This value replaces the name inherited from the payment plan.
              validation:
                minLength: 5
                maxLength: 128
            description:
              type: optional<string>
              docs: >
                Description of the subscription. 

                This value replaces the description inherited from the payment
                plan.
              validation:
                minLength: 1
                maxLength: 128
            setupOrder: optional<root.SubscriptionPaymentOrder>
            recurringOrder: optional<root.SubscriptionRecurringOrder>
            startDate:
              type: date
              docs: |
                Format: **YYYY-MM-DD**  
                Subscription's start date.
            endDate:
              type: optional<date>
              docs: >
                Format: **YYYY-MM-DD**  

                Subscription's end date.  

                **Note:** If you provide values for both **length** and
                **endDate**, 

                our gateway uses the value for **endDate** to determine when the
                subscription should end.
            length:
              type: optional<integer>
              docs: >
                Total number of billing cycles. To indicate that the
                subscription should run indefinitely, send a value of `0`.

                This value replaces the **length** inherited from the payment
                plan.  

                **Note:** If you provide values for both **length** and
                **endDate**, 

                our gateway uses the value for **endDate** to determine when the
                subscription should end.
              validation:
                min: 0
            pauseCollectionFor:
              type: optional<integer>
              docs: >
                Number of billing cycles that the merchant wants to pause
                payments for. 

                For example, if the merchant wants to offer a free trial period.
            customFields:
              type: optional<list<root.CustomField>>
              docs: |
                Array of customField objects.
        content-type: application/json
      response:
        docs: Successful request. We created the subscription.
        type: root.Subscription
        status-code: 201
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Subscription
          path-parameters:
            processingTerminalId: '1234001'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            subscriptionId: SubRef7654
            paymentPlanId: PlanRef8765
            paymentMethod:
              token: '1234567890123456789'
              type: secureToken
            name: Premium Club
            description: Premium Club subscription
            setupOrder:
              orderId: OrderRef6543
              amount: 4999
              description: Initial setup fee for Premium Club subscription
              breakdown:
                subtotal: 4347
                taxes:
                  - name: Sales Tax
                    rate: 5
            recurringOrder:
              amount: 4999
              description: Monthly Premium Club subscription
              breakdown:
                subtotal: 4347
                taxes:
                  - name: Sales Tax
                    rate: 5
            startDate: '2024-07-02'
            endDate: '2025-07-01'
            length: 12
            pauseCollectionFor: 0
            customFields:
              - name: yourCustomField
                value: abc123
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              paymentPlan:
                paymentPlanId: PlanRef8765
                name: Monthly Premium Club subscription
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              name: Premium Club
              description: Premium Club subscription
              currency: USD
              setupOrder:
                orderId: OrderRef6543
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              recurringOrder:
                amount: 4999
                description: Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              currentState:
                status: active
                nextDueDate: '2024-08-02'
                paidInvoices: 0
                outstandingInvoices: 3
              startDate: '2024-07-02'
              endDate: '2025-07-01'
              length: 12
              type: automatic
              frequency: monthly
              pauseCollectionFor: 0
              customFields:
                - name: yourCustomField
                  value: abc123
    retrieve:
      path: >-
        /processing-terminals/{processingTerminalId}/subscriptions/{subscriptionId}
      method: GET
      auth: true
      docs: "Use this method to retrieve information about a subscription.  \n\nTo retrieve a subscription, you need its subscriptionId. You sent the subscriptionId in the request of the [Create subscription](/api/schema/payments/subscriptions/create) method.  \n\n**Note:** If you don't have the subscriptionId, use our [List subscriptions](/api/schema/payments/subscriptions/list) method to search for the subscription.  \n\nOur gateway returns information about the following for the subscription:  \n\n-\tPayment plan the subscription is linked to.  \n-\tSecure token that represents cardholder’s payment details.  \n-\tCurrent state of the subscription, including its status, next due date, and invoices.  \n-\tFees for setup and the cost of the recurring order.  \n-\tSubscription length, end date, and frequency.  \n\nWe also return the paymentPlanId and the secureTokenId, which you can use to perform follow-on actions.  \n"
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Retrieve subscription
      request:
        name: RetrieveSubscriptionsRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
          subscriptionId:
            type: string
            docs: Unique identifier that the merchant assigned to the subscription.
      response:
        docs: Successful request. Returns the requested subscription.
        type: root.Subscription
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Subscription
          path-parameters:
            processingTerminalId: '1234001'
            subscriptionId: SubRef7654
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              paymentPlan:
                paymentPlanId: PlanRef8765
                name: Monthly Premium Club subscription
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              name: Premium Club
              description: Premium Club subscription
              currency: USD
              setupOrder:
                orderId: OrderRef6543
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              recurringOrder:
                amount: 4999
                description: Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              currentState:
                status: active
                nextDueDate: '2024-08-02'
                paidInvoices: 0
                outstandingInvoices: 3
              startDate: '2024-07-02'
              endDate: '2025-07-01'
              length: 12
              type: automatic
              frequency: monthly
              pauseCollectionFor: 0
              customFields:
                - name: yourCustomField
                  value: abc123
    update:
      path: >-
        /processing-terminals/{processingTerminalId}/subscriptions/{subscriptionId}
      method: PATCH
      auth: true
      docs: >
        Use this method to partially update a subscription. Structure your
        request to follow the [RFC
        6902](https://datatracker.ietf.org/doc/html/rfc6902) standard.  


        To update a subscription, you need its subscriptionId, which you sent in
        the request of the [Create
        subscription](/api/schema/payments/subscriptions/create) method.  


        **Note:** If you don't have the subscriptionId, use our [List
        subscriptions](/api/schema/payments/subscriptions/list) method to search
        for the payment.  


        You can update all of the properties of the subscription except for the
        following:  


        **Can't delete**  

        - recurringOrder

        - description

        - name


        **Can't perform any PATCH operation**  

        - currentState

        - type

        - frequency

        - paymentPlan
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Update subscription
      request:
        body: root.PatchRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
          subscriptionId:
            type: string
            docs: Unique identifier that the merchant assigned to the subscription.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        name: UpdateSubscriptionsRequest
        content-type: application/json
      response:
        docs: Successful request. We have updated the subscription.
        type: root.Subscription
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Update subscription
          path-parameters:
            processingTerminalId: '1234001'
            subscriptionId: SubRef7654
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            - path: path
              op: remove
            - path: path
              op: remove
            - path: path
              op: remove
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              paymentPlan:
                paymentPlanId: PlanRef8765
                name: Monthly Premium Club subscription
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              name: Premium Club
              description: Premium Club subscription
              currency: USD
              setupOrder:
                orderId: OrderRef6543
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              recurringOrder:
                amount: 4999
                description: Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              currentState:
                status: active
                nextDueDate: '2024-08-02'
                paidInvoices: 0
                outstandingInvoices: 3
              startDate: '2024-07-02'
              endDate: '2025-07-01'
              length: 12
              type: automatic
              frequency: monthly
              pauseCollectionFor: 0
              customFields:
                - name: yourCustomField
                  value: abc123
        - name: Example patch operations that apply the RFC 6902 standard
          path-parameters:
            processingTerminalId: '1234001'
            subscriptionId: SubRef7654
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            - path: path
              op: remove
            - path: path
              op: remove
            - path: path
              op: remove
            - from: from
              path: path
              op: move
            - from: from
              path: path
              op: copy
            - path: path
              op: remove
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              paymentPlan:
                paymentPlanId: PlanRef8765
                name: Monthly Premium Club subscription
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              name: Premium Club
              description: Premium Club subscription
              currency: USD
              setupOrder:
                orderId: OrderRef6543
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              recurringOrder:
                amount: 4999
                description: Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              currentState:
                status: active
                nextDueDate: '2024-08-02'
                paidInvoices: 0
                outstandingInvoices: 3
              startDate: '2024-07-02'
              endDate: '2025-07-01'
              length: 12
              type: automatic
              frequency: monthly
              pauseCollectionFor: 0
              customFields:
                - name: yourCustomField
                  value: abc123
    deactivate:
      path: >-
        /processing-terminals/{processingTerminalId}/subscriptions/{subscriptionId}/deactivate
      method: POST
      auth: true
      docs: >
        Use this method to deactivate a subscription.  


        To deactivate a subscription, you need its subscriptionId, which you
        sent in the request of the [Create
        Subscription](/api/schema/payments/subscriptions/create) method.  


        **Note:** If you don't have the subscriptionId, use our [List
        Subscriptions](/api/schema/payments/subscriptions/list) method to search
        for the subscription.  


        If your request is successful, our gateway stops taking payments from
        the customer.  


        To reactivate the subscription, use our [Reactivate
        Subscription](/api/schema/payments/subscriptions/reactivate) method.
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Deactivate subscription
      request:
        name: DeactivateSubscriptionsRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
          subscriptionId:
            type: string
            docs: Unique identifier that the merchant assigned to the subscription.
      response:
        docs: Successful request. We deactivated the subscription.
        type: root.Subscription
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Deactivate subscription
          path-parameters:
            processingTerminalId: '1234001'
            subscriptionId: SubRef7654
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              paymentPlan:
                paymentPlanId: PlanRef8765
                name: Monthly Premium Club subscription
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              name: Premium Club
              description: Monthly Premium Club subscription
              currency: USD
              setupOrder:
                orderId: OrderRef6543
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              recurringOrder:
                amount: 4999
                description: Monthly Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              currentState:
                status: cancelled
                nextDueDate: '2024-08-02'
                paidInvoices: 0
                outstandingInvoices: 3
              startDate: '2024-07-02'
              endDate: '2025-07-01'
              length: 12
              type: automatic
              frequency: monthly
              pauseCollectionFor: 0
              customFields:
                - name: yourCustomField
                  value: abc123
    reactivate:
      path: >-
        /processing-terminals/{processingTerminalId}/subscriptions/{subscriptionId}/reactivate
      method: POST
      auth: true
      docs: >
        Use this method to reactivate a subscription.  


        To reactivate a subscription, you need its subscriptionId, which you
        sent in the request of the [Create
        Subscription](/api/schema/payments/subscriptions/create) method.  


        **Note:** If you don't have the subscriptionId, use our [List
        Subscriptions](/api/schema/payments/subscriptions/list) method to search
        for the subscription.  


        If your request is successful, our gateway restarts taking payments from
        the customer.  


        To deactivate the subscription, use our [Deactivate
        Subscription](/api/schema/payments/subscriptions/deactivate) method.
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Re-activate subscription
      request:
        name: ReactivateSubscriptionsRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
          subscriptionId:
            type: string
            docs: Unique identifier that the merchant assigned to the subscription.
      response:
        docs: Successful request. We re-activated the subscription.
        type: root.Subscription
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Subscription
          path-parameters:
            processingTerminalId: '1234001'
            subscriptionId: SubRef7654
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              paymentPlan:
                paymentPlanId: PlanRef8765
                name: Monthly Premium Club subscription
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/payment-plans/PlanRef8765
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              name: Premium Club
              description: Premium Club subscription
              currency: USD
              setupOrder:
                orderId: OrderRef6543
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              recurringOrder:
                amount: 4999
                description: Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
                  surcharge:
                    bypass: false
                    amount: 217
                    percentage: 5
              currentState:
                status: active
                nextDueDate: '2024-08-02'
                paidInvoices: 0
                outstandingInvoices: 3
              startDate: '2024-07-02'
              endDate: '2025-07-01'
              length: 12
              type: automatic
              frequency: monthly
              pauseCollectionFor: 0
              customFields:
                - name: yourCustomField
                  value: abc123
    pay:
      path: >-
        /processing-terminals/{processingTerminalId}/subscriptions/{subscriptionId}/pay
      method: POST
      auth: true
      docs: >
        Use this method to manually collect a payment linked to a subscription.
        You can manually collect a payment only if the merchant chose not to let
        our gateway automatically collect each payment.  


        To manually collect a payment, you need the subscriptionId of the
        subscription that's linked to the payment. You sent the subscriptionId
        in the request of the [Create
        Subscription](/api/schema/payments/subscriptions/create) method.  


        **Note:** If you don't have the subscriptionId, use our [List
        Subscriptions](/api/schema/payments/subscriptions/list) method to search
        for the subscription.  


        The request includes an order object that contains information about the
        amount that you want to collect.  


        In the response, our gateway returns information about the payment and a
        paymentId. You can use the paymentId in follow-on actions with the
        [Payments](/api/schema/payments) endpoints or [Bank Transfer
        Payments](/api/schema/payments/bank-transfer-payments) endpoints.  
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Pay manual subscription
      request:
        name: SubscriptionPaymentRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that we assigned to the terminal.
          subscriptionId:
            type: string
            docs: Unique identifier that the merchant assigned to the subscription.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        body:
          properties:
            operator:
              type: optional<string>
              docs: Operator who initiated the request.
              validation:
                minLength: 0
                maxLength: 50
            order:
              type: root.SubscriptionPaymentOrder
              docs: Object that contains information about the payment.
            customFields:
              type: optional<list<root.CustomField>>
              docs: |
                Array of customField objects.
        content-type: application/json
      response:
        docs: >-
          Successful request. We have processed the payment for the
          subscription.
        type: root.SubscriptionPayment
        status-code: 201
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Subscription manual payment
          path-parameters:
            processingTerminalId: '1234001'
            subscriptionId: SubRef7654
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            operator: Jane
            order:
              orderId: OrderRef6543
              amount: 4999
              description: Monthly Premium Club subscription
              breakdown:
                subtotal: 4999
                taxes:
                  - name: Sales Tax
                    rate: 5
            customFields:
              - name: yourCustomField
                value: abc123
          response:
            body:
              subscriptionId: SubRef7654
              processingTerminalId: '1234001'
              payment:
                paymentId: M2MJOG6O2Y
                dateTime: '2024-07-02T15:30:00Z'
                currency: USD
                amount: 4999
                status: ready
                responseCode: A
                responseMessage: Transaction approved
                link:
                  rel: self
                  method: GET
                  href: https://api.payroc.com/v1/bank-transfer-payments/M2MJOG6O2Y
              secureToken:
                secureTokenId: MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
                customerName: Sarah Hazel Hopper
                token: '296753123456'
                status: notValidated
                link:
                  rel: self
                  method: GET
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1234001/secure-tokens/MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa
              currentState:
                status: active
                nextDueDate: '2024-08-02'
                paidInvoices: 1
                outstandingInvoices: 2
              customFields:
                - name: yourCustomField
                  value: abc123
  source:
    openapi: read-only/openapi/external/universal-api-v1.yaml
