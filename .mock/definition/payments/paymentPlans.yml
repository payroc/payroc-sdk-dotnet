imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    list:
      path: /processing-terminals/{processingTerminalId}/payment-plans
      method: GET
      auth: true
      docs: Retrieve a list of payment plans.
      pagination:
        type: custom
        results: $response.data
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: List payment plans
      request:
        name: ListPaymentPlansRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that our gateway assigned to the terminal.
        query-parameters:
          before:
            type: optional<string>
            docs: >-
              Points to the resource identifier that you want to receive your
              results before. Typically, this is the first resource on the
              previous page.
          after:
            type: optional<string>
            docs: >-
              Points to the resource identifier that you want to receive your
              results after. Typically, this is the last resource on the
              previous page.
          limit:
            type: optional<integer>
            default: 10
            docs: States the total amount of results the response is limited to.
            validation:
              max: 100
      response:
        docs: Successful request. Returns a paginated list of payment plans.
        type: root.PaymentPlanPaginatedList
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Payment Plan
          path-parameters:
            processingTerminalId: '1234001'
          query-parameters:
            before: '2571'
            after: '8516'
          response:
            body:
              limit: 2
              count: 2
              hasMore: true
              links:
                - rel: next
                  method: get
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1001/payment-plans?limit=2&after=PlanRef8766
                - rel: previous
                  method: get
                  href: >-
                    https://api.payroc.com/v1/processing-terminals/1001/payment-plans?limit=2&before=PlanRef8765
              data:
                - paymentPlanId: PlanRef8765
                  processingTerminalId: '1234001'
                  name: Premium Club
                  description: Monthly Premium Club subscription
                  currency: USD
                  setupOrder:
                    amount: 4999
                    description: Initial setup fee for Premium Club subscription
                    breakdown:
                      subtotal: 4999
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  recurringOrder:
                    amount: 4999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4999
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  length: 12
                  type: automatic
                  frequency: monthly
                  onUpdate: continue
                  onDelete: complete
                  customFieldNames:
                    - yourCustomField
                - paymentPlanId: PlanRef8766
                  processingTerminalId: '1234001'
                  name: Pie It Forward
                  description: Pie It Forward charitable trust donation
                  currency: USD
                  setupOrder:
                    amount: 4999
                    description: Initial setup fee for Premium Club subscription
                    breakdown:
                      subtotal: 4999
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  recurringOrder:
                    amount: 4999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4999
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  length: 0
                  type: automatic
                  frequency: yearly
                  onUpdate: continue
                  onDelete: complete
                  customFieldNames:
                    - yourCustomField
        - name: No records found
          path-parameters:
            processingTerminalId: '1234001'
          query-parameters:
            before: '2571'
            after: '8516'
          response:
            body:
              limit: 10
              count: 0
              hasMore: false
              links:
                - rel: previous
                  method: get
                  href: <uri>
                - rel: next
                  method: get
                  href: <uri>
              data:
                - paymentPlanId: PlanRef8765
                  processingTerminalId: '1234001'
                  name: Premium Club
                  description: Monthly Premium Club subscription
                  currency: AED
                  setupOrder:
                    amount: 4999
                    description: Initial setup fee for Premium Club subscription
                    breakdown:
                      subtotal: 4999
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  recurringOrder:
                    amount: 4999
                    description: Monthly Premium Club subscription
                    breakdown:
                      subtotal: 4999
                      taxes:
                        - name: Sales Tax
                          rate: 7
                          amount: 190
                  length: 12
                  type: manual
                  frequency: weekly
                  onUpdate: update
                  onDelete: complete
                  customFieldNames:
                    - yourCustomField
    create:
      path: /processing-terminals/{processingTerminalId}/payment-plans
      method: POST
      auth: true
      docs: Create a new payment plan.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Create payment plan
      request:
        body: root.PaymentPlan
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that our gateway assigned to the terminal.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        name: CreatePaymentPlansRequest
        content-type: application/json
      response:
        docs: Successful request. We created the payment plan.
        type: root.PaymentPlan
        status-code: 201
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Payment Plan
          path-parameters:
            processingTerminalId: '1234001'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            paymentPlanId: PlanRef8765
            name: Premium Club
            description: Monthly Premium Club subscription
            currency: USD
            setupOrder:
              amount: 4999
              description: Initial setup fee for Premium Club subscription
              breakdown:
                subtotal: 4347
                taxes:
                  - name: Sales Tax
                    rate: 5
            recurringOrder:
              amount: 4999
              description: Monthly Premium Club subscription
              breakdown:
                subtotal: 4347
                taxes:
                  - name: Sales Tax
                    rate: 5
            length: 12
            type: automatic
            frequency: monthly
            onUpdate: continue
            onDelete: complete
            customFieldNames:
              - yourCustomField
          response:
            body:
              paymentPlanId: PlanRef8765
              processingTerminalId: '1234001'
              name: Premium Club
              description: Monthly Premium Club subscription
              currency: USD
              setupOrder:
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              recurringOrder:
                amount: 4999
                description: Monthly Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              length: 12
              type: automatic
              frequency: monthly
              onUpdate: continue
              onDelete: complete
              customFieldNames:
                - yourCustomField
    get:
      path: >-
        /processing-terminals/{processingTerminalId}/payment-plans/{paymentPlanId}
      method: GET
      auth: true
      docs: Retrieve a specific payment plan.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Retrieve payment plan
      request:
        name: GetPaymentPlansRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that our gateway assigned to the terminal.
          paymentPlanId:
            type: string
            docs: Unique identifier that the merchant assigned to the payment plan.
      response:
        docs: Successful request. Returns the requested payment plan.
        type: root.PaymentPlan
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Payment Plan
          path-parameters:
            processingTerminalId: '1234001'
            paymentPlanId: PlanRef8765
          response:
            body:
              paymentPlanId: PlanRef8765
              processingTerminalId: '1234001'
              name: Premium Club
              description: Monthly Premium Club subscription
              currency: USD
              setupOrder:
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              recurringOrder:
                amount: 4999
                description: Monthly Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              length: 12
              type: automatic
              frequency: monthly
              onUpdate: continue
              onDelete: complete
              customFieldNames:
                - yourCustomField
    delete:
      path: >-
        /processing-terminals/{processingTerminalId}/payment-plans/{paymentPlanId}
      method: DELETE
      auth: true
      docs: >
        Delete an existing payment plan.  

        **Note:** After you delete a payment plan, you can't reuse the
        paymentPlanId.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Delete payment plan
      request:
        name: DeletePaymentPlansRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that our gateway assigned to the terminal.
          paymentPlanId:
            type: string
            docs: Unique identifier that the merchant assigned to the payment plan.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.InternalServerError
      examples:
        - path-parameters:
            processingTerminalId: '1234001'
            paymentPlanId: PlanRef8765
    update:
      path: >-
        /processing-terminals/{processingTerminalId}/payment-plans/{paymentPlanId}
      method: PATCH
      auth: true
      docs: |
        Make changes to an existing payment plan.  

        Structure your request to follow the RFC 6902 standard.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Update payment plan
      request:
        body: root.PatchRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that our gateway assigned to the terminal.
          paymentPlanId:
            type: string
            docs: Unique identifier that the merchant assigned to the payment plan.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        name: UpdatePaymentPlansRequest
        content-type: application/json
      response:
        docs: Successful request. We updated the payment plan.
        type: root.PaymentPlan
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Partially update payment plan
          path-parameters:
            processingTerminalId: '1234001'
            paymentPlanId: PlanRef8765
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            - path: path
              op: remove
            - path: path
              op: remove
            - path: path
              op: remove
          response:
            body:
              paymentPlanId: PlanRef8765
              processingTerminalId: '1234001'
              name: Premium Club
              description: Monthly Premium Club subscription
              currency: USD
              setupOrder:
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              recurringOrder:
                amount: 4999
                description: Monthly Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              length: 12
              type: automatic
              frequency: monthly
              onUpdate: continue
              onDelete: complete
              customFieldNames:
                - yourCustomField
        - name: Example patch operations that apply the RFC 6902 standard
          path-parameters:
            processingTerminalId: '1234001'
            paymentPlanId: PlanRef8765
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            - path: path
              op: remove
            - path: path
              op: remove
            - path: path
              op: remove
            - from: from
              path: path
              op: move
            - from: from
              path: path
              op: copy
            - path: path
              op: remove
          response:
            body:
              paymentPlanId: PlanRef8765
              processingTerminalId: '1234001'
              name: Premium Club
              description: Monthly Premium Club subscription
              currency: USD
              setupOrder:
                amount: 4999
                description: Initial setup fee for Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              recurringOrder:
                amount: 4999
                description: Monthly Premium Club subscription
                breakdown:
                  subtotal: 4347
                  taxes:
                    - name: Sales Tax
                      rate: 5
                      amount: 190
              length: 12
              type: automatic
              frequency: monthly
              onUpdate: continue
              onDelete: complete
              customFieldNames:
                - yourCustomField
  source:
    openapi: openapi/external/universal-api-v1.yaml
