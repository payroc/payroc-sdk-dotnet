types:
  SingleUseTokenRequestChannel:
    enum:
      - pos
      - web
      - moto
    docs: Channel that the merchant used to receive the payment details.
    inline: true
    source:
      openapi: openapi/external/universal-api-v1.yaml
  SingleUseTokenRequestSource:
    discriminant: type
    base-properties: {}
    docs: Object that contains information about the payment method to tokenize.
    union:
      ach:
        type: root.AchPayload
      pad:
        type: root.PadPayload
      card:
        type: root.CardPayload
    source:
      openapi: openapi/external/universal-api-v1.yaml
imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    create:
      path: /processing-terminals/{processingTerminalId}/single-use-tokens
      method: POST
      auth: true
      docs: Create a single-use token. The token expires after 30 minutes.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Create single use token
      request:
        name: SingleUseTokenRequest
        path-parameters:
          processingTerminalId:
            type: string
            docs: Unique identifier that our gateway assigned to the terminal.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        body:
          properties:
            channel:
              type: SingleUseTokenRequestChannel
              docs: Channel that the merchant used to receive the payment details.
            operator:
              type: optional<string>
              docs: Operator who initiated the request.
              validation:
                minLength: 1
                maxLength: 50
            source:
              type: SingleUseTokenRequestSource
              docs: >-
                Object that contains information about the payment method to
                tokenize.
        content-type: application/json
      response:
        docs: Successful request. We created the single-use token.
        type: root.SingleUseToken
        status-code: 201
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Single Use Token Response
          path-parameters:
            processingTerminalId: '1234001'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            channel: web
            operator: Jane
            source:
              cardDetails:
                device:
                  model: bbposChp
                  serialNumber: PAX123456789
                rawData: >-
                  A1B2C3D4E5F67890ABCD1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF
                entryMethod: raw
              type: card
          response:
            body:
              processingTerminalId: '1234001'
              operator: Jane
              paymentMethod:
                accountType: checking
                cardDetails:
                  downgradeTo: keyed
                  device:
                    model: bbposChp
                    serialNumber: PAX123456789
                    firmwareVersion: v1.2.3
                    config:
                      quickChip: false
                  rawData: >-
                    A1B2C3D4E5F67890ABCD1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF
                  cardholderSignature: >-
                    a1b1c012345678a000b000c0012345d0e0f010g10061a031i001j071k0a1b0c1d0e1234567890120f1g0h1i0j1k0a1b0123451c012d0e1f0g1h0i1j123k1a1b1c1d1e1f1g123h1i1j1k1a1b1c1d1e1f1g123h123i1j123k12340a120a12345b012c0123012d0d1e0f1g0h1i123j123k10000
                  entryMethod: raw
                type: card
              token: >-
                fa2e9e51bc5265a33a5ca41449524d53d1def596ffd8c0904f222183a71a65cdb58835120a65196a48a6375abc4deafe2b7e948689ab9d6aba919e860f32e247
              expiresAt: '2024-08-05T17:50:05Z'
              source:
                cardholderName: Sarah Hazel Hopper
                cardNumber: '4539858876047062'
                expiryDate: '1225'
                cardType: cardType
                currency: AED
                debit: true
                surcharging:
                  allowed: true
                  amount: 87
                  percentage: 3
                  disclosure: A 3% surcharge is applied to cover processing fees.
                type: card
  source:
    openapi: openapi/external/universal-api-v1.yaml
