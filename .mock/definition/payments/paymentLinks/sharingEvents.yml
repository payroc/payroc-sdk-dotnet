imports:
  root: ../../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    list:
      path: /payment-links/{paymentLinkId}/sharing-events
      method: GET
      auth: true
      docs: >-
        Use this method to retrieve a
        [paginated](https://docs.payroc.com/api/pagination) list of sharing
        events for a payment link. A sharing event occurs when a merchant shares
        a payment link with a customer.
      pagination:
        type: custom
        results: $response.data
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: List payment link sharing events.
      request:
        name: ListSharingEventsRequest
        path-parameters:
          paymentLinkId:
            type: string
            docs: Unique identifier that we assigned to the payment link.
        query-parameters:
          recipientName:
            type: optional<string>
            docs: Filter results by the customer's name.
            validation:
              minLength: 1
              maxLength: 48
          recipientEmail:
            type: optional<string>
            docs: Filter results by the customer's email address.
            validation:
              minLength: 6
              maxLength: 128
          before:
            type: optional<string>
            docs: >-
              Points to the resource identifier that you want to receive your
              results before. Typically, this is the first resource on the
              previous page.
          after:
            type: optional<string>
            docs: >-
              Points to the resource identifier that you want to receive your
              results after. Typically, this is the last resource on the
              previous page.
          limit:
            type: optional<integer>
            default: 10
            docs: States the total amount of results the response is limited to.
            validation:
              max: 100
      response:
        docs: >-
          Successful request. Returns a
          [paginated](https://docs.payroc.com/api/pagination) list of sharing
          events for the payment link.
        type: root.SharingEventPaginatedList
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Sharing events
          path-parameters:
            paymentLinkId: JZURRJBUPS
          query-parameters:
            recipientName: Sarah Hazel Hopper
            recipientEmail: sarah.hopper@example.com
            before: '2571'
            after: '8516'
          response:
            body:
              limit: 2
              count: 2
              hasMore: true
              links:
                - rel: next
                  method: get
                  href: >-
                    https://api.payroc.com/v1/payment-links/CKHP6VVWYT/sharing-events?limit=2&after=GTZH5WVXK9
                - rel: previous
                  method: get
                  href: >-
                    https://api.payroc.com/v1/payment-links/CKHP6VVWYT/sharing-events?limit=2&before=GKB49GZ6DL
              data:
                - sharingMethod: email
                  sharingEventId: GKB49GZ6DL
                  dateTime: '2024-07-02T15:30:00Z'
                  merchantCopy: true
                  message: |
                    Dear Sarah,

                    You can pay for your order via the link below.
                  recipients:
                    - name: Sarah Hazel Hopper
                      email: sarah.hopper@example.com
                - sharingMethod: email
                  sharingEventId: GTZH5WVXK9
                  dateTime: '2024-07-02T15:30:00Z'
                  merchantCopy: true
                  message: >
                    Dear Sarah,


                    Thank you for continuing to support our Pie It Forward
                    charitable trust.

                    You can make your payment via the link below.
                  recipients:
                    - name: Sarah Hazel Hopper
                      email: sarah.hopper@example.com
        - name: No records found
          path-parameters:
            paymentLinkId: JZURRJBUPS
          query-parameters:
            recipientName: Sarah Hazel Hopper
            recipientEmail: sarah.hopper@example.com
            before: '2571'
            after: '8516'
          response:
            body:
              limit: 10
              count: 0
              hasMore: false
              links:
                - rel: previous
                  method: get
                  href: <uri>
                - rel: next
                  method: get
                  href: <uri>
              data:
                - sharingMethod: email
                  sharingEventId: GTZH5WVXK9
                  dateTime: '2024-07-02T15:30:00Z'
                  merchantCopy: true
                  message: >
                    Dear Sarah,

                    Your insurance is expiring this month.

                    Please pay the renewal fee by the end of the month to renew
                    your insurance.
                  recipients:
                    - name: Sarah Hazel Hopper
                      email: sarah.hopper@example.com
    share:
      path: /payment-links/{paymentLinkId}/sharing-events
      method: POST
      auth: true
      docs: >
        Use this method to email a payment link that the merchant has already
        created.

        **Note:** To create a payment link, go to [Create payment
        link](#createPaymentLink).
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Share payment link
      request:
        body:
          type: root.PaymentLinkEmailShareEvent
        path-parameters:
          paymentLinkId:
            type: string
            docs: Unique identifier that we assigned to the payment link.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        name: ShareSharingEventsRequest
        content-type: application/json
      response:
        docs: Successful request. We shared the payment link.
        type: root.PaymentLinkEmailShareEvent
        status-code: 201
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Payment link sharing event.
          path-parameters:
            paymentLinkId: JZURRJBUPS
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            sharingMethod: email
            merchantCopy: true
            message: |
              Dear Sarah,

              Your insurance is expiring this month.
              Please, pay the renewal fee by the end of the month to renew it.
            recipients:
              - name: Sarah Hazel Hopper
                email: sarah.hopper@example.com
          response:
            body:
              sharingMethod: email
              sharingEventId: GTZH5WVXK9
              dateTime: '2024-07-02T15:30:00Z'
              merchantCopy: true
              message: |
                Dear Sarah,

                You can pay for your order via the link below.
              recipients:
                - name: Sarah Hazel Hopper
                  email: sarah.hopper@example.com
  source:
    openapi: read-only/openapi/external/universal-api-v1.yaml
