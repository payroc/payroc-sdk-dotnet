imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    submit:
      path: /devices/{serialNumber}/refund-instructions
      method: POST
      auth: true
      docs: >
        Submit an instruction request to initiate a refund on a payment
        device.  


        In the response, our gateway returns information about the refund
        instruction and a refundInstructionId, which you need for the following
        methods:

        - [Retrieve refund
        instruction](https://docs.payroc.com/api/schema/payroc-cloud/refund-instructions/retrieve)
        - View the details of the refund instruction.

        - [Cancel refund
        instruction](https://docs.payroc.com/api/schema/payroc-cloud/refund-instructions/delete)
        - Cancel the refund instruction.
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Submit refund instruction
      request:
        name: RefundInstructionRequest
        path-parameters:
          serialNumber:
            type: string
            docs: Serial number that identifies the merchantâ€™s payment device.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the [UUID v4 format](https://www.rfc-editor.org/rfc/rfc4122) for
              the identifier. For more information about the idempotency key, go
              to [Idempotency](https://docs.payroc.com/api/idempotency).
        body:
          properties:
            operator:
              type: optional<string>
              docs: Operator who initiated the request.
              validation:
                minLength: 0
                maxLength: 50
            processingTerminalId:
              type: string
              docs: Unique identifier that we assigned to the terminal.
              validation:
                minLength: 4
                maxLength: 50
            order: root.RefundInstructionOrder
            customer: optional<root.Customer>
            ipAddress: optional<root.IpAddress>
            customizationOptions: optional<root.CustomizationOptions>
        content-type: application/json
      response:
        docs: Successful request. We accepted the refund instruction to process.
        type: root.RefundInstruction
        status-code: 202
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Refund instruction
          path-parameters:
            serialNumber: '1850010868'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            operator: Jane
            processingTerminalId: '1234001'
            order:
              orderId: OrderRef6543
              description: Refund for order OrderRef6543
              amount: 4999
              currency: USD
            customizationOptions:
              entryMethod: manualEntry
          response:
            body:
              status: inProgress
              errorMessage: errorMessage
              link:
                rel: self
                method: GET
                href: >-
                  https://api.payroc.com/v1/refund-instructions/a37439165d134678a9100ebba3b29597
              refundInstructionId: a37439165d134678a9100ebba3b29597
    retrieve:
      path: /refund-instructions/{refundInstructionId}
      method: GET
      auth: true
      docs: Retrieve the current status of a specific refund instruction.
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Retrieve refund instruction
      request:
        name: RetrieveRefundInstructionsRequest
        path-parameters:
          refundInstructionId:
            type: string
            docs: Unique identifier of the refund instruction.
      response:
        docs: >-
          Successful request. Returns the current status of the requested refund
          instruction.
        type: root.RefundInstruction
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Refund instruction
          path-parameters:
            refundInstructionId: a37439165d134678a9100ebba3b29597
          response:
            body:
              status: completed
              errorMessage: errorMessage
              link:
                rel: refund
                method: GET
                href: https://api.payroc.com/v1/refunds/CD3HN88U9F
              refundInstructionId: a37439165d134678a9100ebba3b29597
    delete:
      path: /refund-instructions/{refundInstructionId}
      method: DELETE
      auth: true
      docs: >
        Use this method to cancel a refund instruction.  


        To cancel a refund instruction, you need its refundInstructionId. Our
        gateway returned the refundInstructionId in the response of the [Submit
        Refund
        Instruction](https://docs.payroc.com/api/schema/payroc-cloud/refund-instructions/submit)
        method.   
      source:
        openapi: read-only/openapi/external/universal-api-v1.yaml
      display-name: Cancel refund instruction
      request:
        name: DeleteRefundInstructionsRequest
        path-parameters:
          refundInstructionId:
            type: string
            docs: Unique identifier of the refund instruction.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.InternalServerError
      examples:
        - path-parameters:
            refundInstructionId: a37439165d134678a9100ebba3b29597
  source:
    openapi: read-only/openapi/external/universal-api-v1.yaml
