imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    send:
      path: /devices/{serialNumber}/refund-instructions
      method: POST
      auth: true
      docs: Submit an instruction request to initiate a refund on a payment device.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Submit refund instruction
      request:
        name: RefundInstructionRequest
        path-parameters:
          serialNumber:
            type: string
            docs: Serial number that identifies the merchantâ€™s payment device.
        headers:
          Idempotency-Key:
            type: string
            name: idempotencyKey
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
        body:
          properties:
            operator:
              type: optional<string>
              docs: Operator who initiated the request.
              validation:
                minLength: 0
                maxLength: 50
            processingTerminalId:
              type: string
              docs: Unique identifier that our gateway assigned to the terminal.
              validation:
                minLength: 4
                maxLength: 50
            order: root.RefundInstructionOrder
            customer: optional<root.Customer>
            ipAddress: optional<root.IpAddress>
            customizationOptions: optional<root.CustomizationOptions>
        content-type: application/json
      response:
        docs: Successful request. We accepted the refund instruction to process.
        type: root.RefundInstruction
        status-code: 202
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - name: Refund instruction
          path-parameters:
            serialNumber: '1850010868'
          headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          request:
            operator: Jane
            processingTerminalId: '1234001'
            order:
              orderId: OrderRef6543
              description: Refund for order OrderRef6543
              amount: 4999
              currency: USD
            customizationOptions:
              entryMethod: manualEntry
          response:
            body:
              status: inProgress
              errorMessage: errorMessage
              link:
                rel: self
                method: GET
                href: >-
                  https://api.payroc.com/v1/refund-instructions/a37439165d134678a9100ebba3b29597
              refundInstructionId: a37439165d134678a9100ebba3b29597
    get:
      path: /refund-instructions/{refundInstructionId}
      method: GET
      auth: true
      docs: Retrieve the current status of a specific refund instruction.
      source:
        openapi: openapi/external/universal-api-v1.yaml
      display-name: Retrieve refund instruction
      request:
        name: GetRefundInstructionsRequest
        path-parameters:
          refundInstructionId:
            type: string
            docs: Unique identifier of the refund instruction.
      response:
        docs: >-
          Successful request. Returns the current status of the requested refund
          instruction.
        type: root.RefundInstruction
        status-code: 200
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Refund instruction
          path-parameters:
            refundInstructionId: a37439165d134678a9100ebba3b29597
          response:
            body:
              status: completed
              errorMessage: errorMessage
              link:
                rel: refund
                method: GET
                href: https://api.payroc.com/v1/refunds/CD3HN88U9F
              refundInstructionId: a37439165d134678a9100ebba3b29597
  source:
    openapi: openapi/external/universal-api-v1.yaml
