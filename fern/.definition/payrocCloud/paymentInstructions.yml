imports:
  root: ../__package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    get:
      auth: true
      display-name: Retrieve payment instruction
      docs: Retrieve the current status of a specific payment instruction.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Payment instruction
          path-parameters:
            paymentInstructionId: e743a9165d134678a9100ebba3b29597
          response:
            body:
              errorMessage: errorMessage
              link:
                href: https://api.payroc.com/v1/payments/M2MJOG6O2Y
                method: GET
                rel: payment
              paymentInstructionId: a37439165d134678a9100ebba3b29597
              status: completed
      method: GET
      path: /payment-instructions/{paymentInstructionId}
      request:
        name: GetPaymentInstructionsRequest
        path-parameters:
          paymentInstructionId:
            docs: Unique identifier of the payment instruction.
            type: string
      response:
        docs: >-
          Successful request. Returns the current status of the requested
          payment instruction.
        status-code: 200
        type: root.PaymentInstruction
      source:
        openapi: openapi/external/universal-api-v1.yaml
    send:
      auth: true
      display-name: Submit payment instruction
      docs: Submit an instruction request to initiate a sale on a payment device.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.ConflictError
        - root.UnsupportedMediaTypeError
        - root.InternalServerError
      examples:
        - headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          name: Payment instruction
          path-parameters:
            serialNumber: '1850010868'
          request:
            autoCapture: true
            customizationOptions:
              entryMethod: deviceRead
            operator: Jane
            order:
              amount: 4999
              currency: USD
              orderId: OrderRef6543
            processingTerminalId: '1234001'
          response:
            body:
              errorMessage: errorMessage
              link:
                href: >-
                  https://api.payroc.com/v1/payment-instructions/a37439165d134678a9100ebba3b29597
                method: GET
                rel: self
              paymentInstructionId: a37439165d134678a9100ebba3b29597
              status: inProgress
      method: POST
      path: /devices/{serialNumber}/payment-instructions
      request:
        body:
          properties:
            autoCapture:
              default: true
              docs: >
                Indicates if we should automatically capture the payment
                amount.  


                - `true` - Run a sale and automatically capture the transaction.

                - `false`- Run a pre-authorization and capture the transaction
                later.  


                **Note**: If you send `false` and the terminal doesn't support
                pre-authorization, we set the transaction's status to pending.
                The merchant must capture the transaction to take payment from
                the customer.
              type: optional<boolean>
            credentialOnFile: optional<root.CredentialOnFile>
            customer: optional<root.Customer>
            customizationOptions: optional<root.CustomizationOptions>
            ipAddress: optional<root.IpAddress>
            operator:
              docs: Operator who initiated the request.
              type: optional<string>
              validation:
                maxLength: 50
                minLength: 0
            order: root.PaymentInstructionOrder
            processAsSale:
              default: false
              docs: >
                Indicates if we should immediately settle the sale transaction.
                The merchant cannot adjust the transaction if we immediately
                settle it.  

                **Note**: If the value for **processAsSale** is `true`, the
                gateway ignores the value in **autoCapture**.
              type: optional<boolean>
            processingTerminalId:
              docs: Unique identifier that our gateway assigned to the terminal.
              type: string
              validation:
                maxLength: 50
                minLength: 4
        content-type: application/json
        headers:
          Idempotency-Key:
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
            name: idempotencyKey
            type: string
        name: PaymentInstructionRequest
        path-parameters:
          serialNumber:
            docs: Serial number that identifies the merchantâ€™s payment device.
            type: string
      response:
        docs: Successful request. We accepted the payment instruction to process.
        status-code: 202
        type: root.PaymentInstruction
      source:
        openapi: openapi/external/universal-api-v1.yaml
  source:
    openapi: openapi/external/universal-api-v1.yaml
