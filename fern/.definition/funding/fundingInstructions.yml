imports:
  root: ../__package__.yml
types:
  ListFundingInstructionsResponse:
    extends:
      - root.PaginatedList
    properties:
      data:
        docs: Array of fundingInstruction objects.
        type: list<ListFundingInstructionsResponseDataItem>
    source:
      openapi: openapi/external/universal-api-v1.yaml
  ListFundingInstructionsResponseDataItem:
    extends:
      - root.Instruction
    inline: true
    properties:
      link: optional<root.Link>
    source:
      openapi: openapi/external/universal-api-v1.yaml
service:
  auth: false
  base-path: ''
  endpoints:
    create:
      auth: true
      display-name: Create funding instruction
      docs: >-
        Create funding instructions to tell us how to divide funds between your
        funding recipients.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.ConflictError
        - root.InternalServerError
      examples:
        - headers:
            Idempotency-Key: 8e03978e-40d5-43e8-bc93-6894a57f9324
          name: New instruction accepted.
          request: {}
          response:
            body:
              createdDate: '2024-07-02T15:30:00Z'
              instructionId: 64643131
              lastModifiedDate: '2024-07-02T15:30:00Z'
              merchants:
                - link:
                    href: https://api.payroc.com/v1/merchants/4525644354
                    method: get
                    rel: merchant
                  merchantId: '4525644354'
                  recipients:
                    - amount:
                        currency: USD
                        value: 120000
                      fundingAccountId: 123
                      link:
                        href: https://api.payroc.com/v1/funding-accounts/123
                        method: get
                        rel: fundingAccount
                      metadata:
                        yourCustomField: abc123
                      paymentMethod: ACH
                      status: accepted
              metadata:
                instructionRef: abc123
              status: accepted
      method: POST
      path: /funding-instructions
      request:
        body:
          type: root.Instruction
        content-type: application/json
        headers:
          Idempotency-Key:
            docs: >-
              Unique identifier that you generate for each request. You must use
              the UUID v4 format for the identifier. For more information about
              the idempotency key, go to
              [Idempotency](https://docs.payroc.com/api/idempotency).
            name: idempotencyKey
            type: string
        name: CreateFundingInstructionsRequest
      response:
        docs: Successful request. We accepted the instructions.
        status-code: 201
        type: root.Instruction
      source:
        openapi: openapi/external/universal-api-v1.yaml
    delete:
      auth: true
      display-name: Delete funding instruction
      docs: Delete an existing funding instruction.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.InternalServerError
      examples:
        - path-parameters:
            instructionId: 1
      method: DELETE
      path: /funding-instructions/{instructionId}
      request:
        name: DeleteFundingInstructionsRequest
        path-parameters:
          instructionId:
            docs: Unique identifier of the funding instruction.
            type: integer
      source:
        openapi: openapi/external/universal-api-v1.yaml
    get:
      auth: true
      display-name: Retrieve funding instruction
      docs: Retrieve a specific funding instruction.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - path-parameters:
            instructionId: 1
          response:
            body:
              createdDate: '2024-07-02T15:30:00Z'
              instructionId: 64643131
              lastModifiedDate: '2024-07-02T15:30:00Z'
              merchants:
                - link:
                    href: https://api.payroc.com/v1/merchants/4525644354
                    method: get
                    rel: merchant
                  merchantId: '4525644354'
                  recipients:
                    - amount:
                        value: 120000
                      fundingAccountId: 123
                      metadata:
                        yourCustomField: abc123
                      paymentMethod: ACH
              metadata:
                yourCustomField: abc123
              status: accepted
      method: GET
      path: /funding-instructions/{instructionId}
      request:
        name: GetFundingInstructionsRequest
        path-parameters:
          instructionId:
            docs: Unique identifier of the funding instruction.
            type: integer
      response:
        docs: Successful request. Returns the requested funding instruction.
        status-code: 200
        type: root.Instruction
      source:
        openapi: openapi/external/universal-api-v1.yaml
    list:
      auth: true
      display-name: List funding instructions
      docs: Retrieve a list of funding instructions for a specific date range.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotAcceptableError
        - root.InternalServerError
      examples:
        - name: Paginated instructions list
          query-parameters:
            after: '8516'
            before: '2571'
            dateFrom: '2024-07-01'
            dateTo: '2024-07-03'
          response:
            body:
              count: 2
              data:
                - createdDate: '2024-07-02T15:30:00Z'
                  instructionId: 64643131
                  lastModifiedDate: '2024-07-02T15:30:00Z'
                  link:
                    href: https://api.payroc.com/v1/funding-instructions/64643131
                    method: get
                    rel: fundingInstruction
                  merchants:
                    - link:
                        href: https://api.payroc.com/v1/merchants/4525644354
                        method: get
                        rel: merchant
                      merchantId: '4525644354'
                      recipients:
                        - amount:
                            currency: USD
                            value: 120000
                          fundingAccountId: 123
                          link:
                            href: https://api.payroc.com/v1/funding-accounts/123
                            method: get
                            rel: fundingAccount
                          metadata:
                            yourCustomField: abc123
                          paymentMethod: ACH
                          status: funded
                        - amount:
                            currency: USD
                            value: 50050
                          fundingAccountId: 124
                          link:
                            href: https://api.payroc.com/v1/funding-accounts/124
                            method: get
                            rel: fundingAccount
                          metadata:
                            yourCustomField: abc123
                          paymentMethod: ACH
                          status: rejected
                  metadata:
                    yourCustomField: abc123
                  status: completed
                - createdDate: '2024-07-02T15:30:00Z'
                  instructionId: 64643132
                  lastModifiedDate: '2024-07-02T15:30:00Z'
                  link:
                    href: https://api.payroc.com/v1/funding-instructions/64643132
                    method: get
                    rel: fundingInstruction
                  merchants:
                    - link:
                        href: https://api.payroc.com/v1/merchants/4525644354
                        method: get
                        rel: merchant
                      merchantId: '4525644354'
                      recipients:
                        - amount:
                            currency: USD
                            value: 5000
                          fundingAccountId: 123
                          link:
                            href: https://api.payroc.com/v1/funding-accounts/123
                            method: get
                            rel: fundingAccount
                          metadata:
                            yourCustomField: abc123
                          paymentMethod: ACH
                          status: accepted
                    - link:
                        href: https://api.payroc.com/v1/merchants/4525644354
                        method: get
                        rel: merchant
                      merchantId: '4525644354'
                      recipients:
                        - amount:
                            currency: USD
                            value: 1000
                          fundingAccountId: 124
                          link:
                            href: https://api.payroc.com/v1/funding-accounts/124
                            method: get
                            rel: fundingAccount
                          metadata:
                            yourCustomField: abc123
                          paymentMethod: ACH
                          status: accepted
                  metadata:
                    yourCustomField: abc123
                  status: accepted
              hasMore: true
              limit: 2
              links:
                - href: >-
                    https://api.payroc.com/v1/funding-instructions?before=64643131&limit=2&datefrom=2024-07-01&dateto=2024-07-03
                  method: get
                  rel: previous
                - href: >-
                    https://api.payroc.com/v1/funding-instructions?after=64643132&limit=2&datefrom=2024-07-01&dateto=2024-07-03
                  method: get
                  rel: next
        - name: No records found
          query-parameters:
            after: '8516'
            before: '2571'
            dateFrom: '2024-07-01'
            dateTo: '2024-07-03'
          response:
            body:
              count: 0
              data:
                - createdDate: '2024-07-02T15:30:00Z'
                  instructionId: 64643131
                  lastModifiedDate: '2024-07-02T15:30:00Z'
                  link:
                    href: <uri>
                    method: get
                    rel: previous
                  merchants:
                    - merchantId: '4525644354'
                      recipients:
                        - amount:
                            value: 120000
                          fundingAccountId: 123
                          metadata:
                            yourCustomField: abc123
                          paymentMethod: ACH
                  metadata:
                    yourCustomField: abc123
                  status: accepted
              hasMore: false
              limit: 10
              links:
                - href: <uri>
                  method: get
                  rel: previous
                - href: <uri>
                  method: get
                  rel: next
      method: GET
      pagination:
        results: $response.data
        type: custom
      path: /funding-instructions
      request:
        name: ListFundingInstructionsRequest
        query-parameters:
          after:
            docs: >-
              Points to the resource identifier that you want to receive your
              results after. Typically, this is the last resource on the
              previous page.
            type: optional<string>
          before:
            docs: >-
              Points to the resource identifier that you want to receive your
              results before. Typically, this is the first resource on the
              previous page.
            type: optional<string>
          dateFrom:
            docs: >-
              Retrieve activity that occured since `dateFrom`. We can return
              activity from only the last two years.
            type: string
            validation:
              format: date
          dateTo:
            docs: Retrieve activity that occured before `dateTo`.
            type: string
            validation:
              format: date
          limit:
            default: 10
            docs: States the total amount of results the response is limited to.
            type: optional<integer>
            validation:
              max: 100
      response:
        docs: Successful request. Returns a list of funding instructions.
        status-code: 200
        type: ListFundingInstructionsResponse
      source:
        openapi: openapi/external/universal-api-v1.yaml
    update:
      auth: true
      display-name: Update funding instruction
      docs: Update an existing funding instruction.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
        - root.NotFoundError
        - root.InternalServerError
      examples:
        - path-parameters:
            instructionId: 1
          request: {}
      method: PUT
      path: /funding-instructions/{instructionId}
      request:
        body:
          type: root.Instruction
        content-type: application/json
        name: UpdateFundingInstructionsRequest
        path-parameters:
          instructionId:
            docs: Unique identifier of the funding instruction.
            type: integer
      source:
        openapi: openapi/external/universal-api-v1.yaml
  source:
    openapi: openapi/external/universal-api-v1.yaml
